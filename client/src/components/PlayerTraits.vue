
<template>
  <div class="traits-wrapper">
    <div class="imageAndStatsFrame roundEdges box-shadow">
      <div class="information roundEdges">
        <span id="champ-header">Champion</span>
        <span id="champName">Nasus</span>
      </div>
      <div class="championInfo">
        <div class="imageFrame">
          <img class="roundEdges" id="loadingFrame" src="http://ddragon.leagueoflegends.com/cdn/img/champion/loading/Nasus_0.jpg" />
        </div>
        <div id="champSpellInfo">
          <div class="champSpellImgWrapper">
            <div class="champSpellImg roundEdges">
              <div id="spellQ" class="img roundEdges"></div>
              <div class="spellName">Q</div>
            </div>
            <div class="spell-lvl-grid-wrapper">
              <div class="lvl-display">
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
              </div>
              <div id="spell-1" class="spell-lvl-grid">
                <div class="r1 c1">1</div>
                <div class="r1 c2">2</div>
                <div class="r1 c3">3</div>
                <div class="r1 c4">4</div>
                <div class="r1 c5">5</div>
                <div class="r2 c1">6</div>
                <div class="r2 c2">7</div>
                <div class="r2 c3">8</div>
                <div class="r2 c4">9</div>
                <div class="r2 c5">10</div>
                <div class="r3 c1">11</div>
                <div class="r3 c2">12</div>
                <div class="r3 c3">13</div>
                <div class="r3 c4">14</div>
                <div class="r3 c5">15</div>
                <div class="r4 c2">16</div>
                <div class="r4 c3">17</div>
                <div class="r4 c4">18</div>
              </div>
            </div>
          </div>
          <div class="champSpellImgWrapper">
            <div class="champSpellImg roundEdges">
              <div id="spellW" class="img roundEdges"></div>
              <div class="spellName">W</div>
            </div>
            <div class="spell-lvl-grid-wrapper">
              <div class="lvl-display">
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
              </div>
              <div id="spell-2" class="spell-lvl-grid">
                <div class="r1 c1">1</div>
                <div class="r1 c2">2</div>
                <div class="r1 c3">3</div>
                <div class="r1 c4">4</div>
                <div class="r1 c5">5</div>
                <div class="r2 c1">6</div>
                <div class="r2 c2">7</div>
                <div class="r2 c3">8</div>
                <div class="r2 c4">9</div>
                <div class="r2 c5">10</div>
                <div class="r3 c1">11</div>
                <div class="r3 c2">12</div>
                <div class="r3 c3">13</div>
                <div class="r3 c4">14</div>
                <div class="r3 c5">15</div>
                <div class="r4 c2">16</div>
                <div class="r4 c3">17</div>
                <div class="r4 c4">18</div>
              </div>
            </div>
          </div>
          <div class="champSpellImgWrapper">
            <div class="champSpellImg roundEdges">
              <div id="spellE" class="img roundEdges"></div>
              <div class="spellName">E</div>
            </div>
            <div class="spell-lvl-grid-wrapper">
              <div class="lvl-display">
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
              </div>
              <div id="spell-3" class="spell-lvl-grid">
                <div class="r1 c1">1</div>
                <div class="r1 c2">2</div>
                <div class="r1 c3">3</div>
                <div class="r1 c4">4</div>
                <div class="r1 c5">5</div>
                <div class="r2 c1">6</div>
                <div class="r2 c2">7</div>
                <div class="r2 c3">8</div>
                <div class="r2 c4">9</div>
                <div class="r2 c5">10</div>
                <div class="r3 c1">11</div>
                <div class="r3 c2">12</div>
                <div class="r3 c3">13</div>
                <div class="r3 c4">14</div>
                <div class="r3 c5">15</div>
                <div class="r4 c2">16</div>
                <div class="r4 c3">17</div>
                <div class="r4 c4">18</div>
              </div>
            </div>
          </div>
          <div class="champSpellImgWrapper">
            <div class="champSpellImg roundEdges">
              <div id="spellR" class="img roundEdges"></div>
              <div class="spellName">R</div>
            </div>
            <div class="spell-lvl-grid-wrapper">
              <div class="lvl-display">
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
                <div class="lvl-of-indiv-spell"></div>
              </div>
              <div id="spell-4" class="spell-lvl-grid">
                <div class="r1 c1">1</div>
                <div class="r1 c2">2</div>
                <div class="r1 c3">3</div>
                <div class="r1 c4">4</div>
                <div class="r1 c5">5</div>
                <div class="r2 c1">6</div>
                <div class="r2 c2">7</div>
                <div class="r2 c3">8</div>
                <div class="r2 c4">9</div>
                <div class="r2 c5">10</div>
                <div class="r3 c1">11</div>
                <div class="r3 c2">12</div>
                <div class="r3 c3">13</div>
                <div class="r3 c4">14</div>
                <div class="r3 c5">15</div>
                <div class="r4 c2">16</div>
                <div class="r4 c3">17</div>
                <div class="r4 c4">18</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="imageAndStatsFrame roundEdges box-shadow" id="traitsGraph"></div>
    <div class="imageAndStatsFrame roundEdges box-shadow"></div>
  </div>
</template>

<script>
export default {
  name: 'PlayerTraits',
  components: {
  },
  props: {
  },
  data() {
    return {
      
    }
  },
  methods: {
    gradient(spellCounter){
      return Math.abs((0.032*Math.pow(spellCounter-2.5,3)+0.5+0.1*Math.sin(0.4*Math.PI*(spellCounter-2.5))).toFixed(4))
    },
    gradientUlt(spellCounter){
      return Math.abs((spellCounter/2).toFixed(4))
    }
  },
  mounted() {
      const lvlUpOrder = new Array([],[],[],[],[],[],[],[],[],[])
      for(let i of this.$store.state.matchDataTimeline.frames){
          for(let x of i.events){
              if(x.type == "SKILL_LEVEL_UP" && x.levelUpType == "NORMAL"){
                  lvlUpOrder[x.participantId - 1].push(x.skillSlot);
              }
          }
      }

      let qCounter = 0;
      let wCounter = 0;
      let eCounter = 0;
      let rCounter = 0;

      for(let i = 0; i<lvlUpOrder[0].length; i++){
        if(lvlUpOrder[0][i] == 1) {
          document.getElementById("spell-1").childNodes[i].style.backgroundImage = `linear-gradient(to right, rgba(var(--SpellLvlDisplay), ${this.gradient(qCounter)}),  rgba(var(--SpellLvlDisplay), ${this.gradient(qCounter)})), linear-gradient(to right, rgba(var(--Font), 0.7),  rgba(var(--Font), 0.7))`
          document.getElementById("spell-1").childNodes[i].style.color = "#000"
          qCounter++;
          }
      }
      for(let i = 0; i<lvlUpOrder[0].length; i++){
        if(lvlUpOrder[0][i] == 2) {
          document.getElementById("spell-2").childNodes[i].style.backgroundImage = `linear-gradient(to right, rgba(var(--SpellLvlDisplay), ${this.gradient(wCounter)}),  rgba(var(--SpellLvlDisplay), ${this.gradient(wCounter)})), linear-gradient(to right, rgba(var(--Font), 0.7),  rgba(var(--Font), 0.7))`
          document.getElementById("spell-2").childNodes[i].style.color = "#000"
          wCounter++;
          }
      }
      for(let i = 0; i<lvlUpOrder[0].length; i++){
        if(lvlUpOrder[0][i] == 3) {
          document.getElementById("spell-3").childNodes[i].style.backgroundImage = `linear-gradient(to right, rgba(var(--SpellLvlDisplay), ${this.gradient(eCounter)}),  rgba(var(--SpellLvlDisplay), ${this.gradient(eCounter)})), linear-gradient(to right, rgba(var(--Font), 0.7),  rgba(var(--Font), 0.7))`
          document.getElementById("spell-3").childNodes[i].style.color = "#000"
          eCounter++;
          }
      }
      for(let i = 0; i<lvlUpOrder[0].length; i++){
        if(lvlUpOrder[0][i] == 4) {
          document.getElementById("spell-4").childNodes[i].style.backgroundImage = `linear-gradient(to right, rgba(var(--SpellLvlDisplay), ${this.gradientUlt(rCounter)}),  rgba(var(--SpellLvlDisplay), ${this.gradientUlt(rCounter)})), linear-gradient(to right, rgba(var(--Font), 0.7),  rgba(var(--Font), 0.7))`
          document.getElementById("spell-4").childNodes[i].style.color = "#000"
          rCounter++;
          }
      }

      qCounter = 0;
      wCounter = 0;
      eCounter = 0;
      rCounter = 0;
  }
}
</script>

<style scoped>
.traits-wrapper {
  display: flex;
  gap: 10px;
  height: 50vh;
}
.imageAndStatsFrame {
  display: flex;
  flex-direction: column;
  flex: 1;
  justify-content: center;
  align-items: center;
  height: 100%;
  background-color: rgb(var(--HeaderBG));
  padding: 0 10px;
}
.information {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 75%;
  /*background-color: rgb(var(--SidebarBG));
  background-image: linear-gradient(to bottom, rgb(var(--MainBG)), #0000);*/
}
.championInfo {
  display: flex;
  width: 100%;
  justify-content: center;
  align-items: center;
  gap: 10px;
  height: 80%;
}
#traitsGraph {
  flex: 2 !important;
}
.champSpellImgWrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  aspect-ratio: 1 / 1;
  height: 24%;
  width: auto;
  gap: 5px
}
.champSpellImg {
  position: relative;
  height: 75%;
  aspect-ratio: 1 / 1;
  
}
.img {
  height: 100%;
  width: 100%;
}
#spellQ {
  background-image: url("http://ddragon.leagueoflegends.com/cdn/11.24.1/img/spell/NasusQ.png");
  background-position: center;
  background-size: contain;
}
#spellW {
  background-image: url("http://ddragon.leagueoflegends.com/cdn/11.24.1/img/spell/NasusW.png");
  background-position: center;
  background-size: contain;
}
#spellE {
  background-image: url("http://ddragon.leagueoflegends.com/cdn/11.24.1/img/spell/NasusE.png");
  background-position: center;
  background-size: contain;
}
#spellR {
  background-image: url("http://ddragon.leagueoflegends.com/cdn/11.24.1/img/spell/NasusR.png");
  background-position: center;
  background-size: contain;
}
.spellName {
  padding: 2px;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 10px;
  position: absolute;
  right: -4px;
  bottom: -4px;
  font-size: 0.7rem;
  height: 20%;
  width: 20%;
  border: 1px solid black;
  background-image: linear-gradient(to right, rgba(var(--Font),0.1), rgba(var(--Font),0.1)), linear-gradient(to right, rgb(var(--HeaderBG)), rgb(var(--HeaderBG)));
}
.lvl-display {
  display: flex;
  height: 4px;
  width: 100%;
  gap: 2px;
}
.lvl-of-indiv-spell{
  display: flex;
  flex:1;
}
.spell-lvl-grid-wrapper {
  display: flex;
  flex-direction: column;
  flex: 1;
  justify-content: space-evenly;
  align-items: center;
  height: 75%;
}
.spell-lvl-grid{
  display: grid;
  grid-template-columns: repeat(5, minmax(10px,1fr));
  grid-template-rows: repeat(4, minmax(10px,1fr));
  font-size: 7px;
  gap: 3px;
  width: 90%;
}
.r1 {
  grid-row: 1;
  border-top: 1px solid rgba(var(--Font),0.1);
  border-bottom: 1px solid rgba(var(--Font),0.1);
}
.r2 {
  grid-row: 2;
  border-bottom: 1px solid rgba(var(--Font),0.1);
}
.r3 {
  grid-row: 3;
  border-bottom: 1px solid rgba(var(--Font),0.1);
}
.r4 {
  grid-row: 4;
  border-bottom: 1px solid rgba(var(--Font),0.1);
}
.c1 {
  grid-column: 1;
  border-left: 1px solid rgba(var(--Font),0.1);
}
.c2 {
  grid-column: 2;
  border-left: 1px solid rgba(var(--Font),0.1);
}
.c3 {
  grid-column: 3;
  border-left: 1px solid rgba(var(--Font),0.1);
}
.c4 {
  grid-column: 4;
  border-left: 1px solid rgba(var(--Font),0.1);
  border-right: 1px solid rgba(var(--Font),0.1);
}
.c5 {
  grid-column: 5;
  border-right: 1px solid rgba(var(--Font),0.1);
}
.imageFrame {
  display: flex;
  flex: 1;
  justify-content: center;
  align-items: center;
  height: 90%;
}
#loadingFrame {
  height: 100%;
  width: auto;
}
#champSpellInfo {
  display: flex;
  flex: 1;
  flex-direction: column;
  justify-content: space-evenly;
  height: 90%;
}
#champName {
  font-size: 1.5rem;
  font-weight: 700;
  letter-spacing: 3px;
  filter: drop-shadow(0 0 3px #000a)
}
#champ-header {
  font-size: 0.7rem;
  font-weight: 300;
  filter: drop-shadow(0 0 3px #000a)
}
</style>